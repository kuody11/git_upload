
--實作練習2 資料定義
--建立設施資訊表單
create table locat
(村里別代號 char(4),地址代號 char(3),地址設施 nvarchar2(30),
容人數量 integer,地下樓層數 char(1),類別 nvarchar2(4),轄管分局代號 varchar2(4)
);

--建立轄管村里資訊表單
create table villa
(村里別代號 char(4),村里別 Nvarchar2(3),村里辦公室 nvarchar2(30),村里辦公室電話 varchar2(11)
);

--建立轄管警察分局資訊表單
create table police
(分局代號 varchar2(4),轄管分局 Nvarchar2(4),分局地址 nvarchar2(30),分局電話 varchar2(11)
);

--實作練習3 資料定義
--新增設施資訊內容
insert into locat ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
values ('C001', 'L1','苗栗縣竹南鎮中埔街20號','100','1','公寓','M001');
insert into locat ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
values ('C002', 'L2','苗栗縣竹南鎮和平街79號','3142','1','大樓','M001');
insert into locat ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
values ('C003', 'L3','苗栗縣竹南鎮龍山路三段142號','1072','1','大樓','M001');
insert into locat ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
values ('C004', 'L4','苗栗縣後龍鎮中華路1498號','32','1','公共設施','M001');
insert into locat ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
values ('C005', 'L5','苗栗縣苗栗市米市街80號','106','1','公寓','M002');
insert into locat ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
values ('C005', 'L6','苗栗縣苗栗市光復路117號','26','1','公寓','M002');
insert into locat ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
values ('C005', 'L7','苗栗縣苗栗市博愛街109號','2038','2','公寓','M002');
insert into locat ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
values ('C005', 'L8','苗栗縣苗栗市大同路53號','128','2','大樓','M002');
insert into locat ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
values ('C006', 'L9','苗栗縣頭份市民族里和平路102號','353','1','公共設施','M003');
insert into locat ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
values ('C007', 'L10','苗栗縣頭份市忠孝忠孝一路69號','501','1','私營單位','M003');
insert into locat ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
values ('C008', 'L11','苗栗縣頭份市信義里中正路65號','194','1','公寓','M003');
insert into locat ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
values ('C008', 'L12','苗栗縣頭份市信義里中正路116號','78','1','私營單位','M003');

--新增轄管村里資訊內容
insert into villa ("村里別代號","村里別","村里辦公室","村里辦公室電話")
values ('C001','大埔里','竹南鎮公義路1035號','037-581072');
insert into villa ("村里別代號","村里別","村里辦公室","村里辦公室電話")
values ('C002','竹南里','竹南鎮竹南里中山路103號','037-472735');
insert into villa ("村里別代號","村里別","村里辦公室","村里辦公室電話")
values ('C003','山佳里','竹南鎮山佳里國光街14號','037-614186');
insert into villa ("村里別代號","村里別","村里辦公室","村里辦公室電話")
values ('C004','埔頂里','後龍鎮埔頂里中興路136-1號','037-724839');
insert into villa ("村里別代號","村里別","村里辦公室","村里辦公室電話")
values ('C005','綠苗里','苗栗市綠苗里中正路766號','037-333240');
insert into villa ("村里別代號","村里別","村里辦公室","村里辦公室電話")
values ('C006','民族里','民族里民族路96號','037-660001');
insert into villa ("村里別代號","村里別","村里辦公室","村里辦公室電話")
values ('C007','忠孝里','忠孝里光大街82號','037-661145');
insert into villa ("村里別代號","村里別","村里辦公室","村里辦公室電話")
values ('C087','信義里','信義里信義路53巷1號','037-616072');

--新增轄管警察分局資訊內容
insert into police ("分局代號","轄管分局","分局地址","分局電話")
values ('M001','竹南分局','苗栗縣竹南鎮民族街72號','037-474796');
insert into police ("分局代號","轄管分局","分局地址","分局電話")
values ('M002','苗栗分局','苗栗縣苗栗市金鳳街109號','037-320059');
insert into police ("分局代號","轄管分局","分局地址","分局電話")
values ('M003','頭份分局','苗栗縣頭份市中興路503號','037-663004');

--實作練習4 資料查詢
--4.1(v)
select pol.轄管分局,pol.分局電話,loc.容人數量
from police pol
inner join locat loc on pol.分局代號=loc.轄管分局代號
where 容人數量>'1000';

--4.2
select pol.轄管分局,pol.分局電話,count(loc.容人數量)
from police pol
inner join locat loc on pol.分局代號=loc.轄管分局代號
where 容人數量>'1000'
group by pol.轄管分局,pol.分局電話;

--4.3
select pol.轄管分局,pol.分局電話,count(loc.容人數量),loc.地址設施,loc.類別
from police pol
inner join locat loc on pol.分局代號=loc.轄管分局代號
where 容人數量>'1000'
group by pol.轄管分局,pol.分局電話,loc.地址設施,loc.類別;

--4.4
select vil.村里別,loc.地址設施,loc.容人數量, pol.轄管分局,pol.分局電話
from police pol
inner join locat loc on pol.分局代號=loc.轄管分局代號
inner join villa vil on loc.村里別代號=vil.村里別代號
where loc.地址設施 like'%中%';

--4.5
select vil.村里別,vil.村里辦公室,loc.地址設施,loc.容人數量
from villa vil
inner join locat loc on vil.村里別代號=loc.村里別代號
where loc.類別 in ('公寓','大樓');

--練習5 資料操控
create table locatnew
(村里別代號 char(4),地址代號 char(3),地址設施 nvarchar2(30),
容人數量 integer,地下樓層數 char(1),類別 nvarchar2(4),轄管分局代號 varchar2(4)
);
insert into locatnew ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
values ('C001', 'L1','苗栗縣竹南鎮中埔街20號','100','1','公寓','M001');
insert into locatnew ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
values ('C002', 'L2','苗栗縣竹南鎮和平街79號','3142','1','大樓','M001');
insert into locatnew ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
values ('C003', 'L3','苗栗縣竹南鎮龍山路三段142號','1072','1','大樓','M001');
insert into locatnew ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
values ('C004', 'L4','苗栗縣後龍鎮中華路1498號','32','1','公共設施','M001');
insert into locatnew("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
values ('C005', 'L5','苗栗縣苗栗市米市街80號','106','1','公寓','M002');
insert into locatnew ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
values ('C005', 'L6','苗栗縣苗栗市光復路117號','26','1','公寓','M002');
insert into locatnew ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
values ('C005', 'L7','苗栗縣苗栗市博愛街109號','2038','2','公寓','M002');
insert into locatnew ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
values ('C005', 'L8','苗栗縣苗栗市大同路53號','128','2','大樓','M002');
insert into locatnew ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
values ('C006', 'L9','苗栗縣頭份市民族里和平路102號','353','1','公共設施','M003');
insert into locatnew ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
values ('C007', 'L10','苗栗縣頭份市忠孝忠孝一路69號','501','1','私營單位','M003');
insert into locatnew ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
values ('C008', 'L11','苗栗縣頭份市信義里中正路65號','194','1','公寓','M003');
insert into locatnew ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
values ('C008', 'L12','苗栗縣頭份市信義里中正路116號','78','1','私營單位','M003');

--5.1 
update locatnew
set 容人數量='5000'
where 地址設施='苗栗縣竹南鎮和平街79號';

--5.2
delete from locatnew
where 容人數量<'1000';
