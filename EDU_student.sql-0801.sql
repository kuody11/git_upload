
--實作練習2 資料定義
--建立設施資訊表單

create table EDU_student.LOCAT
(村里別代號 char(4),地址代號 char(3),地址設施 nvarchar2(30),
容人數量 integer,地下樓層數 char(1),類別 nvarchar2(4),轄管分局代號 varchar2(4)
);

--建立轄管村里資訊表單
create table EDU_student.VILLA
(村里別代號 char(4),村里別 Nvarchar2(3),村里辦公室 nvarchar2(30),村里辦公室電話 varchar2(11)
);

--建立轄管警察分局資訊表單
create table POlICE
(分局代號 varchar2(4),轄管分局 Nvarchar2(4),分局地址 nvarchar2(30),分局電話 varchar2(11)
);

--實作練習3 資料定義
--新增設施資訊內容
insert into LOCAT ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
 values ('C001', 'L1','苗栗縣竹南鎮中埔街20號','100','1','公寓','M001');
insert into LOCAT ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
 values ('C002', 'L2','苗栗縣竹南鎮和平街79號','3142','1','大樓','M001');
insert into LOCAT ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
 values ('C003', 'L3','苗栗縣竹南鎮龍山路三段142號','1072','1','大樓','M001');
insert into LOCAT ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
 values ('C004', 'L4','苗栗縣後龍鎮中華路1498號','32','1','公共設施','M001');
insert into LOCAT ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
 values ('C005', 'L5','苗栗縣苗栗市米市街80號','106','1','公寓','M002');
insert into LOCAT ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
 values ('C005', 'L6','苗栗縣苗栗市光復路117號','26','1','公寓','M002');
insert into LOCAT ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
 values ('C005', 'L7','苗栗縣苗栗市博愛街109號','2038','2','公寓','M002');
insert into LOCAT ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
 values ('C005', 'L8','苗栗縣苗栗市大同路53號','128','2','大樓','M002');
insert into LOCAT ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
 values ('C006', 'L9','苗栗縣頭份市民族里和平路102號','353','1','公共設施','M003');
insert into LOCAT ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
 values ('C007', 'L10','苗栗縣頭份市忠孝忠孝一路69號','501','1','私營單位','M003');
insert into LOCAT ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
 values ('C008', 'L11','苗栗縣頭份市信義里中正路65號','194','1','公寓','M003');
insert into LOCAT ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
 values ('C008', 'L12','苗栗縣頭份市信義里中正路116號','78','1','私營單位','M003');

--新增轄管村里資訊內容
insert into VILLA ("村里別代號","村里別","村里辦公室","村里辦公室電話")
 values ('C001','大埔里','竹南鎮公義路1035號','037-581072');
insert into VILLA ("村里別代號","村里別","村里辦公室","村里辦公室電話")
 values ('C002','竹南里','竹南鎮竹南里中山路103號','037-472735');
insert into VILLA ("村里別代號","村里別","村里辦公室","村里辦公室電話")
 values ('C003','山佳里','竹南鎮山佳里國光街14號','037-614186');
insert into VILLA ("村里別代號","村里別","村里辦公室","村里辦公室電話")
 values ('C004','埔頂里','後龍鎮埔頂里中興路136-1號','037-724839');
insert into VILLA ("村里別代號","村里別","村里辦公室","村里辦公室電話")
 values ('C005','綠苗里','苗栗市綠苗里中正路766號','037-333240');
insert into VILLA ("村里別代號","村里別","村里辦公室","村里辦公室電話")
 values ('C006','民族里','民族里民族路96號','037-660001');
insert into VILLA ("村里別代號","村里別","村里辦公室","村里辦公室電話")
 values ('C007','忠孝里','忠孝里光大街82號','037-661145');
insert into VILLA ("村里別代號","村里別","村里辦公室","村里辦公室電話")
 values ('C087','信義里','信義里信義路53巷1號','037-616072');

--新增轄管警察分局資訊內容
insert into POLICE ("分局代號","轄管分局","分局地址","分局電話")
 values ('M001','竹南分局','苗栗縣竹南鎮民族街72號','037-474796');
insert into POLICE ("分局代號","轄管分局","分局地址","分局電話")
 values ('M002','苗栗分局','苗栗縣苗栗市金鳳街109號','037-320059');
insert into POLICE ("分局代號","轄管分局","分局地址","分局電話")
 values ('M003','頭份分局','苗栗縣頭份市中興路503號','037-663004');

--實作練習4 資料查詢
--4.1(v)
select POL.轄管分局,POL.分局電話,LOC.容人數量
 from POLICE POL
 inner join LOCAT LOC on POL.分局代號=LOC.轄管分局代號
 where 容人數量>1000;

--4.2
select POL.轄管分局,POL.分局電話,count(LOC.容人數量)
 from POLICE POL
 inner join LOCAT LOC on POL.分局代號=LOC.轄管分局代號
 where 容人數量>1000
 group by POL.轄管分局,POL.分局電話;

--4.3
select POL.轄管分局,POL.分局電話,count(LOC.容人數量),LOC.地址設施,LOC.類別
 from POLICE POL
 inner join LOCAT LOC on POL.分局代號=LOC.轄管分局代號
 where 容人數量>'1000'
 group by POL.轄管分局,POL.分局電話,LOC.地址設施,LOC.類別;

--4.4
select VIL.村里別,LOC.地址設施,LOC.容人數量, POL.轄管分局,POL.分局電話
 from POLICE POL
 inner join LOCAT LOC on POL.分局代號=LOC.轄管分局代號
 inner join villa VIL on LOC.村里別代號=VIL.村里別代號
 where LOC.地址設施 like '%中%';

--4.5
select VIL.村里別, VIL.村里辦公室, LOC.地址設施,LOC.容人數量
 from VILLA VIL
 inner join LOCAT LOC on VIL.村里別代號=LOC.村里別代號
 where LOC.類別 in ('公寓', '大樓');

--練習5 資料操控
create table LOCATNEW
(村里別代號 char(4),地址代號 char(3),地址設施 nvarchar2(30),
容人數量 integer,地下樓層數 char(1),類別 nvarchar2(4),轄管分局代號 varchar2(4)
);
insert into LOCATNEW ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
 values ('C001', 'L1','苗栗縣竹南鎮中埔街20號','100','1','公寓','M001');
insert into LOCATNEW ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
 values ('C002', 'L2','苗栗縣竹南鎮和平街79號','3142','1','大樓','M001');
insert into LOCATNEW ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
 values ('C003', 'L3','苗栗縣竹南鎮龍山路三段142號','1072','1','大樓','M001');
insert into LOCATNEW ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
 values ('C004', 'L4','苗栗縣後龍鎮中華路1498號','32','1','公共設施','M001');
insert into LOCATNEW("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
 values ('C005', 'L5','苗栗縣苗栗市米市街80號','106','1','公寓','M002');
insert into LOCATNEW ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
 values ('C005', 'L6','苗栗縣苗栗市光復路117號','26','1','公寓','M002');
insert into LOCATNEW ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
 values ('C005', 'L7','苗栗縣苗栗市博愛街109號','2038','2','公寓','M002');
insert into LOCATNEW ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
 values ('C005', 'L8','苗栗縣苗栗市大同路53號','128','2','大樓','M002');
insert into LOCATNEW ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
 values ('C006', 'L9','苗栗縣頭份市民族里和平路102號','353','1','公共設施','M003');
insert into LOCATNEW ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
 values ('C007', 'L10','苗栗縣頭份市忠孝忠孝一路69號','501','1','私營單位','M003');
insert into LOCATNEW ("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
 values ('C008', 'L11','苗栗縣頭份市信義里中正路65號','194','1','公寓','M003');
insert into lLOCATNEW("村里別代號","地址代號","地址設施","容人數量","地下樓層數","類別","轄管分局代號")
 values ('C008', 'L12','苗栗縣頭份市信義里中正路116號','78','1','私營單位','M003');

--5.1 
update LOCATNEW
 set 容人數量='5000'
 where 地址設施='苗栗縣竹南鎮和平街79號';

--5.2
delete from LOCATNEW
 where 容人數量<1000;
